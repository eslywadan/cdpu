<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Group / Role - List for Admin</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">

    <script src="{{ url_for('static', filename='js/jquery-3.5.1.min.js') }}"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/kendo.common.min.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/kendo.blueopal.min.css') }}" />

    <script src="{{ url_for('static', filename='js/kendo.all.min.js') }}"></script>
    <script>
        //var dataSource = [{"A":"apple", "B":"ball", "C":"cake"},{"A":"apple2", "B":"ball2", "C":"cake"},{"A":"apple3", "B":"ball3", "C":"cake"}];
       var dataSource = {{accounts|safe}};
    </script>
</head>
<body>
{% if msg_type != "" %}
<div class="alert alert-{{msg_type}} alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
{% endif %}
<h2>Group / Role</h2>
<a href="{{ url_for('acct_bp.get_index_page') }}">
    <span class="k-icon k-i-home"></span>    Home Menu
</a>
&nbsp;&nbsp;&nbsp;
<a href="{{ url_for('acct_bp.create_group_role') }}">
    <span class="k-icon k-i-plus-circle"></span>    Create Group / Role
</a>
<br/>
<div id="grid"></div>
<script>
    $(document).ready(function () {
        $("#grid").kendoGrid({
            dataSource: {data:dataSource, pageSize: 10},
            height: 446,
            sortable: true,
            pageable: {
                refresh: true,
                pageSizes: true,
                buttonCount: 5
            },
			filterable: true, // 啟用過濾功能
            columns: [{
                field: "CLIENT_ID",
                title: "Group / Role Name"
            }, {
                field: "TYPE",
                title: "Type"
            }, {
                template: function(dataItem) {
                    if (dataItem['TYPE'] == 4) {
                        return "ROLE";
                    } else {
                        return "GROUP";
                    }
                },
                field: "TYPE",
                title: "Type Name"
            }, {
                field: "REGISTRY",
                title: "Registry"
            },{
                field: "CREATE_DTTM",
                title: "產生日期時間"
            }, {
                template: function(dataItem) {
                    var edit_root_url = "{{ url_for('acct_bp.edit_group_role_for_admin', client_id='', type='' ) }}";
                    var delete_root_url = "{{ url_for('acct_bp.delete_group_role', client_id='', type='') }}";
                    return "<a href='" + edit_root_url.substr(0, edit_root_url.length - 1) + encodeURIComponent(dataItem.CLIENT_ID) + "/" + dataItem.TYPE + "'>" + 
                           "<span class='k-icon k-i-track-changes-enable'></span> Edit </a>&nbsp;&nbsp;" + 
                           "<a href='" + delete_root_url.substr(0, delete_root_url.length - 1) + encodeURIComponent(dataItem.CLIENT_ID) +  "/" + dataItem.TYPE + "'>"  + 
                           "<span class='k-icon k-i-delete k-i-trash'></span> Delete</a>";
                },
                title: " "
            }]
        });
    });
</script>
</body>
</html>